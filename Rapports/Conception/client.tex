\chapter{Client}

\section{Choix du framework}

\paragraph{}
Pour réaliser l’interface Web de notre application, nous avons opté pour les technologies \texttt{HTML}, \texttt{CSS} et \texttt{Angular}.
\texttt{HTML} nous permettra de réaliser le corps des pages de l’interface, à l’aide de balises définissant les différents éléments de la page pour structurer logiquement le contenu, inclure des fichiers multimédias (des images, par exemple) ou des formulaires web.
Avec le \texttt{CSS}, nous définirons la mise en forme et l’aspect graphique des pages \texttt{HTML}, soit l’agencement des éléments, leurs couleurs, leurs tailles et les polices de caractère.
Quant à \texttt{Angular}, il nous servira à gérer l’aspect dynamique de l’application web, comme la navigation d’une page de l’interface à une autre ou le passage de paramètres entre pages. \texttt{Angular} est un framework Web développé en \texttt{TypeScript}, ce qui en fait l’un des plus utilisés pour le développement \textit{front-end} des applications web. Les principaux avantages d’\texttt{Angular} sont qu’il est mis à jour très régulièrement par les développeurs de Google, qu’il dispose d’une très bonne documentation et que le développement en \texttt{TypeScript} est stable, rapide et facile.

\paragraph{}
Ce sont des technologies largement utilisées par les développeurs et relativement simples d’utilisation. En outre, nous avons déjà été amenés à les utiliser dans des projets précédents, nous partons donc avec des bases. Nous avons fait le choix de la simplicité et de l’utilisation de technologies déjà connues afin de faciliter et d’accélérer la réalisation de l’interface, pour être en mesure de proposer un prototype fonctionnel pour la première itération le 27 février.

%--------------------------------------------------------------------------------------------------------------
\section{Les différents composants de l'interface}

\subsection{Première itération}

\paragraph{}
Pour la première itération, l’interface est réduite à sa forme la plus simple qui répond au cahier des charges, à savoir ouvrir un document de travail et valider ou invalider les transcriptions. L’IHM aura donc deux composants : la page d’accueil et la page de validation des annotations.

\paragraph{}
La page d’accueil permet à l’utilisateur d’indiquer l’emplacement des répertoires contenant les scans et les vérités-terrains, puis de choisir le document sur lequel il souhaite travailler. Cette page possède une liste des documents qui ont été ouverts auparavant dans l’application, ainsi qu’un bouton pour en créer un nouveau. Un clic sur ce bouton ouvre une nouvelle fenêtre pour que l’utilisateur parcourt ses documents et en choisisse un.

% inclure image de la page d'accueil


\paragraph{}
La page de validation, comme son nom l’indique, permet de valider ou d’invalider les transcriptions de la base de données relatives au document ouvert. Ces transcriptions ayant été réalisées par des humains, elles sont considérées vraies et l’utilisateur pourrait les invalider seulement s’il manque des mots ou si l’imagette est jugée peu pertinente pour l’apprentissage (par exemple, si le texte est presque illisible ou si l’imagette ne contient pas de texte du tout). Pour ce faire, les imagettes sont affichées les unes à la suite des autres et chacune possède sa transcription située dans une zone de texte en dessous. Les imagettes sont affichées par groupe de cinq ou six. Une croix à côté de chaque imagette permet à l’utilisateur d’invalider le couple imagette-transcription correspondant. Un simple appui sur la touche \texttt{Entrée} valide l’ensemble des couples affichés sur la page, afin de permettre à l’utilisateur de réaliser la validation le plus rapidement possible. Des flèches gauche et droite permettent de se déplacer dans les groupes d’imagettes pour parcourir l’ensemble des pages du document. Enfin, une icône en haut à gauche renvoie à la page d’accueil.

% inclure image de la page de validation sans la miniature de la page découpée

\subsection{Deuxième itération}

\paragraph{}
Pour la deuxième itération, nous implémenterons les fonctionnalités supplémentaires décrites dans les rapports précédents.

\paragraph{}
Nous proposerons tout d’abord une page de découpe des zones ou des paragraphes du document à l’aide d’outils graphiques regroupés dans une zone à droite de la page. Il y aura un outil pour créer un nouvelle sélection sous la forme d’un quadrilatère, un outil pour déplacer une sélection existante, un autre pour zoomer et dézoomer, un pour annuler ou refaire la dernière action, un outil pour réinitialiser la découpe et supprimer toutes les sélections réalisées et enfin, un dernier outil “premier jet” permettant de lancer un reconnaisseur de lignes sur les zones découpées. Ce dernier permet de voir si les découpes ont bien été réalisées, soit si les lignes sont bien reconnues dans leur intégralité et si aucune partie du texte scanné n’est manquante. 
La bannière en haut de la page contiendra plusieurs boutons de navigation. Un premier bouton permettra de revenir à l’accueil, comme dans toutes les pages de l’interface. Un autre exportera la page découpée vers un reconnaisseur d’écriture manuscrite en envoyant les couples imagettes - transcriptions au reconnaisseur. Tout à droite, un autre bouton permettra à l’utilisateur de passer à la page de transcription manuscrite.

% inclure image de la page de découpe

\paragraph{}
Lors de l’ouverture d’un nouveau document de travail, il devra être possible d’utiliser des manuscrits scannés qui ne possèdent pas de vérité-terrain. L’utilisateur aura alors la possibilité d’annoter le manuscrit manuellement ou de le faire passer par un reconnaisseur d’écriture après avoir découpé les zones du manuscrit via la page de découpe de l’interface.

\paragraph{}
L’interface possèdera donc une page d’annotation manuelle. Les imagettes d’une même zone seront affichées à la suite dans la fenêtre centrale, avec une zone de texte pour la transcription située sous chaque imagette. Le curseur sera positionné automatiquement sur la première transcription affichée, l’utilisateur devra taper la transcription manuellement au clavier puis appuyer sur la touche texttt{Entrée} pour passer à la transcription suivante. Lorsque toutes les imagettes d’une zone ont été annotées, on passe automatiquement aux imagettes de la zone suivante à l’appui sur texttt{Entrée} de la dernière transcription. Le but est de minimiser les actions requises par l’utilisateur, pour qu’il n’utilise que son clavier. Il peut néanmoins positionner son curseur sur la transcription de son choix à l’aide de sa souris.
Une croix à droite de chaque imagette permet de supprimer le couple imagette-transcription de la base d’apprentissage si le couple est jugé peu pertinent. Après l’appui sur ce bouton, le couple est flouté mais toujours visible et la croix est remplacée par une flèche montante qui permet de réintroduire le couple supprimé dans la base d’apprentissage.
Cette page de l’interface possèdera également une fenêtre à droite montrant la page courante en entier, avec toutes ses zones de découpe affichées en surbrillance. Un rectangle parcourera la page au fur et à mesure de la transcription pour indiquer la position courante dans la page.
Sous cette fenêtre de visualisation de la page, l’interface proposera une fenêtre de navigation dans les différents documents, permettant à l’utilisateur d’ouvrir un autre document de travail à tout moment.
Dans la bannière en haut de la page, un bouton permettra à l’utilisateur de revenir à la page de découpe des zones ou encore d’avancer à la page de validation finale des transcriptions, tandis qu’un autre renverra à l’accueil.

% inclure image de la page d'annotation manuelle

\paragraph{}
Si l’utilisateur souhaite faire passer le manuscrit par le reconnaisseur plutôt que de l’annoter manuellement, il pourra visualiser et corriger les résultats de la reconnaissance via la page dédiée de l’interface. Cette page sera sensiblement similaire à la page d’annotation manuelle, la différence principale résidant dans le fait que des transcriptions réalisées par le reconnaisseur seront déjà présentes sous chaque imagette. Le curseur se positionnera automatiquement sur la première transcription et un simple appui sur la touche \textt{Entrée} passera à la transcription suivante. L’utilisateur pourra modifier manuellement la transcription courante en tapant ses modifications au clavier.
Dans la bannière du haut de la page, un bouton renverra à l’accueil et un autre permettra la navigation vers la page de validation finale des transcriptions.

% inclure image de la page de validation du reconnaisseur

Enfin, la dernière page de l’interface sera la page de validation qui a déjà été réalisée lors de la première itération. Une modification y sera apportée pour la deuxième itération : une fenêtre sera ajoutée pour visualiser la page courante en miniature avec ses zones de découpe affichées par dessus ainsi qu’un rectangle montrant la position courante de l’utilisateur, afin que ce dernier ait constamment accès à sa position dans le document.

% inclure image de la page de validation avec la fenêtre de la miniature de la page

\paragraph{}
En résumé, à la fin de la deuxième itération, nous aurons cinq composants différents : la page d’accueil, la page de découpe des zones du document, la page d’annotation manuelle, la page de visualisation de la reconnaissance et la page de validation finale des transcriptions.



%--------------------------------------------------------------------------------------------------------------
\section{Interactions avec le serveur}